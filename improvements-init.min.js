(async()=>{try{let e={remaining:3,maxUses:3,usage:0,unlimited:!1},t={whitelisted:!1,isDeveloper:!1,usage:0};if(window.rateLimiter)try{e=await window.rateLimiter.init(),t=await window.rateLimiter.checkServerUsage()}catch(e){console.warn("‚ö†Ô∏è Rate limiter API unavailable, using defaults:",e)}else console.warn("‚ö†Ô∏è Rate limiter not available, using defaults");const n=e.remaining||0,s=e.maxUses||3,l=s-n,o=document.getElementById("usage-banner"),i=document.getElementById("usage-banner-text"),a=document.getElementById("usage-banner-subtitle"),d=document.getElementById("usage-progress-bar"),c=document.getElementById("usage-progress-container"),r=document.getElementById("usage-upgrade-btn"),y=document.getElementById("sticky-upgrade-bar"),m=document.getElementById("feature-comparison");if(e.unlimited||t.whitelisted){y&&(y.style.display="none"),m&&(m.style.display="none");const n=document.getElementById("next-steps-cta");n&&(n.style.display="none");const s=document.getElementById("faq-section");s&&(s.style.display="none");const l=document.getElementById("progress-indicator");l&&(l.style.display="none");const d=document.getElementById("testimonial-slider");d&&(d.style.display="none");const u=document.getElementById("cover-content"),g=document.getElementById("tips-content");if(u){u.classList.remove("locked-content");const e=u.querySelector(".blur-content"),t=u.querySelector(".unlock-overlay");e&&e.classList.remove("blur-content"),t&&t.remove()}if(g){g.classList.remove("locked-content");const e=g.querySelector(".blur-content"),t=g.querySelector(".unlock-overlay");e&&e.classList.remove("blur-content"),t&&t.remove()}if(console.log("‚úÖ Premium content unlocked"),o.style.display="block",t.isDeveloper){const n=e.usage||t.usage||0;i.textContent=`üîß Developer Mode: ${n} CVs geanalyseerd`,a.textContent="Unlimited toegang - IP Whitelisted"}else i.textContent="‚àû Unlimited Analyses",a.textContent="Premium toegang actief";c.style.display="none",r.style.display="none"}else{y&&(y.style.display="block"),m&&(m.style.display="block");const e=document.getElementById("next-steps-cta");e&&(e.style.display="block");const t=document.getElementById("faq-section");t&&(t.style.display="block");const u=document.getElementById("progress-indicator");u&&(u.style.display="inline-flex");const g=document.getElementById("testimonial-slider");if(g&&(g.style.display="block"),o.style.display="block",i.textContent=`${n}/${s} Gratis CV Analyses`,0===n)a.textContent="Limiet bereikt - Upgrade voor meer",r.style.display="inline-block",r.textContent="‚≠ê Upgrade Now";else if(l>0){a.textContent=`${l} gebruikt, ${n} over`,c.style.display="flex",r.style.display="inline-block";const e=n/s*100;d.style.width=`${e}%`}else a.textContent="Nog beschikbaar deze maand",c.style.display="none",r.style.display="none"}console.log("‚úÖ Usage banner updated on improvements page:",{remaining:n,maxUses:s,used:l,isDeveloper:t.isDeveloper,whitelisted:t.whitelisted})}catch(e){console.error("‚ùå Error initializing banners:",e)}})();